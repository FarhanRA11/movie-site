function reset(){
	document.getElementById('result').innerHTML = '';
}


const data = 
{
    "@meta": {
        "operation": "Search",
        "requestId": "b317929b-ef78-4a6b-a94c-051ac2acf92d",
        "serviceTimeMs": 92.643765
    },
    "@type": "imdb.api.find.response",
    "query": "game",
    "results": [
        {
            "id": "/title/tt0944947/",
            "image": {
                "height": 1500,
                "id": "/title/tt0944947/images/rm4204167425",
                "url": "https://m.media-amazon.com/images/M/MV5BYTRiNDQwYzAtMzVlZS00NTI5LWJjYjUtMzkwNTUzMWMxZTllXkEyXkFqcGdeQXVyNDIzMzcwNjc@._V1_.jpg",
                "width": 1102
            },
            "runningTimeInMinutes": 57,
            "nextEpisode": "/title/tt1480055/",
            "numberOfEpisodes": 73,
            "seriesEndYear": 2019,
            "seriesStartYear": 2011,
            "title": "Game of Thrones",
            "titleType": "tvSeries",
            "year": 2011,
            "principals": [
                {
                    "id": "/name/nm3592338/",
                    "legacyNameText": "Clarke, Emilia",
                    "name": "Emilia Clarke",
                    "category": "actress",
                    "characters": [
                        "Daenerys Targaryen"
                    ],
                    "endYear": 2019,
                    "episodeCount": 62,
                    "roles": [
                        {
                            "character": "Daenerys Targaryen",
                            "characterId": "/character/ch0158597/"
                        }
                    ],
                    "startYear": 2011
                },
                {
                    "id": "/name/nm0227759/",
                    "legacyNameText": "Dinklage, Peter",
                    "name": "Peter Dinklage",
                    "category": "actor",
                    "characters": [
                        "Tyrion Lannister"
                    ],
                    "endYear": 2019,
                    "episodeCount": 67,
                    "roles": [
                        {
                            "character": "Tyrion Lannister",
                            "characterId": "/character/ch0146096/"
                        }
                    ],
                    "startYear": 2011
                },
                {
                    "id": "/name/nm3229685/",
                    "legacyNameText": "Harington, Kit",
                    "name": "Kit Harington",
                    "category": "actor",
                    "characters": [
                        "Jon Snow"
                    ],
                    "endYear": 2019,
                    "episodeCount": 62,
                    "roles": [
                        {
                            "character": "Jon Snow",
                            "characterId": "/character/ch0155777/"
                        }
                    ],
                    "startYear": 2011
                }
            ]
        },
        {
            "id": "/title/tt10919420/",
            "image": {
                "height": 2048,
                "id": "/title/tt10919420/images/rm2766402049",
                "url": "https://m.media-amazon.com/images/M/MV5BYWE3MDVkN2EtNjQ5MS00ZDQ4LTliNzYtMjc2YWMzMDEwMTA3XkEyXkFqcGdeQXVyMTEzMTI1Mjk3._V1_.jpg",
                "width": 1382
            },
            "runningTimeInMinutes": 55,
            "nextEpisode": "/title/tt11979940/",
            "numberOfEpisodes": 10,
            "seriesStartYear": 2021,
            "title": "Squid Game",
            "titleType": "tvSeries",
            "year": 2021,
            "principals": [
                {
                    "id": "/name/nm0497631/",
                    "legacyNameText": "Jung-jae, Lee",
                    "name": "Lee Jung-jae",
                    "category": "actor",
                    "characters": [
                        "Seong Gi-hun"
                    ],
                    "endYear": 2021,
                    "episodeCount": 10,
                    "roles": [
                        {
                            "character": "Seong Gi-hun"
                        }
                    ],
                    "startYear": 2021
                },
                {
                    "id": "/name/nm7676537/",
                    "legacyNameText": "Hae-soo, Park",
                    "name": "Park Hae-soo",
                    "category": "actor",
                    "characters": [
                        "Cho Sang-woo"
                    ],
                    "endYear": 2021,
                    "episodeCount": 9,
                    "roles": [
                        {
                            "character": "Cho Sang-woo"
                        }
                    ],
                    "startYear": 2021
                },
                {
                    "id": "/name/nm9475707/",
                    "legacyNameText": "Hoyeon",
                    "name": "Hoyeon",
                    "category": "actress",
                    "characters": [
                        "Kang Sae-byeok"
                    ],
                    "endYear": 2021,
                    "episodeCount": 8,
                    "roles": [
                        {
                            "character": "Kang Sae-byeok"
                        }
                    ],
                    "startYear": 2021
                }
            ]
        },
        {
            "disambiguation": "I",
            "id": "/title/tt2704998/",
            "image": {
                "height": 2048,
                "id": "/title/tt2704998/images/rm3186446592",
                "url": "https://m.media-amazon.com/images/M/MV5BMjI3ODkzNDk5MF5BMl5BanBnXkFtZTgwNTEyNjY2NDM@._V1_.jpg",
                "width": 1382
            },
            "runningTimeInMinutes": 100,
            "title": "Game Night",
            "titleType": "movie",
            "year": 2018,
            "principals": [
                {
                    "disambiguation": "I",
                    "id": "/name/nm0000867/",
                    "legacyNameText": "Bateman, Jason (I)",
                    "name": "Jason Bateman",
                    "billing": 1,
                    "category": "actor",
                    "characters": [
                        "Max"
                    ],
                    "roles": [
                        {
                            "character": "Max"
                        }
                    ]
                },
                {
                    "disambiguation": "I",
                    "id": "/name/nm1046097/",
                    "legacyNameText": "McAdams, Rachel (I)",
                    "name": "Rachel McAdams",
                    "billing": 2,
                    "category": "actress",
                    "characters": [
                        "Annie"
                    ],
                    "roles": [
                        {
                            "character": "Annie"
                        }
                    ]
                },
                {
                    "disambiguation": "I",
                    "id": "/name/nm0151419/",
                    "legacyNameText": "Chandler, Kyle (I)",
                    "name": "Kyle Chandler",
                    "billing": 3,
                    "category": "actor",
                    "characters": [
                        "Brooks"
                    ],
                    "roles": [
                        {
                            "character": "Brooks"
                        }
                    ]
                }
            ]
        }
	]
}

/*
const options = {
	method: 'GET',
	headers: {
		'X-RapidAPI-Key': '91f666ff61msh4545f09d7eb23ddp1eec0cjsn308767ebedc2',
		'X-RapidAPI-Host': 'imdb8.p.rapidapi.com'
	}
};

async function get_data(q){
	let q_fix = String(q).replace(/\s/g, '%20');
	var url = `https://imdb8.p.rapidapi.com/title/find?q=${q_fix}`;

	const response = await fetch(url, options);
	var data = await response.json();
	console.log(data);

	show(data);
}
*/

var title_id;
function show(data) {
	for(let i=0; i<=20; i++){
		if(String(data.results[i].id).includes('title') && 
			'image' in data.results[i]
		){
			title_id = String(data.results[i].id).slice(7,-1)
			
			var tab = 

				`<div id="tab">
					<div id="container">
						<img src="" alt="image" id="image${i}">
					</div>
					<div id="desc">
						<div id="title">${data.results[i].title}</div>
						<div id="type">${data.results[i].year} ${data.results[i].titleType}</div>
						
						<button>
							<a id="syn${i}" href="">
								synopsis
							</a>
						</button>

						<div id="id">id: ${title_id}</div>
					</div>
				</div>`

			document.getElementById('result').innerHTML += tab;
			document.getElementById(`image${i}`).src = data.results[i].image.url;
			document.getElementById(`syn${i}`).href = 'http://www.google.com'
		}
	}
}

window.onload = function(){
	/*
	let query = String(document.getElementById('input_query').value);
	get_data(query);

	var button = document.getElementById('submit_query');
	button.onclick = function(){
		let query = String(document.getElementById('input_query').value);
		reset();
		if(query.length){
			alert(`search ${query}`);
			get_data(query);
		}
	}
	*/

	reset()
	show(data)
}